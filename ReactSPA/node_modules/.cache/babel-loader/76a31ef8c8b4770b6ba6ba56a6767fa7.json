{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ketis\\\\Documents\\\\estenligne\\\\ReactSPA\\\\src\\\\components\\\\shared\\\\renderfile\\\\RenderFileZone.tsx\";\nimport { Component } from 'react';\nimport CapturedItem from '../captureditem/CapturedItem';\nimport close from \"./../../../wwwroot/images/times_white.png\";\nimport camera from \"./../../../wwwroot/images/camera_p.png\";\nimport pauseCircular from \"./../../../wwwroot/images/pause_circular.png\";\nimport play from \"./../../../wwwroot/images/play.png\";\nimport stopCircular from \"./../../../wwwroot/images/stop_circular.png\";\nimport record from \"./../../../wwwroot/images/record_circular.png\";\nimport microphone from \"./../../../wwwroot/images/microphone.png\";\nimport mutedMicrophone from \"./../../../wwwroot/images/muted_microphone.png\";\nimport video from \"./../../../wwwroot/images/video_white.png\";\nimport videoDeactivate from \"./../../../wwwroot/images/video_deactivate.png\";\nimport { seconds2Time } from '../utils/functions';\nimport \"./RenderFileZone.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass RenderFileZone extends Component {\n  constructor(...args) {\n    super(...args);\n    this.props = this.props;\n    this.player = document.createElement(\"video\");\n    this.mediaRecorder = null;\n    this._intervalId = -1;\n    this._recordedItem = [];\n    this.width = 0;\n    this.height = 0;\n    this.recordPermissionIsAccepted = false;\n    this.constraints = {\n      video: true,\n      audio: true\n    };\n    this.videoTrack = void 0;\n    this.audioTrack = void 0;\n    this.context = null;\n    this._selectedFiles = [];\n    this._state = {\n      isRecording: false,\n      recordIsStopped: true,\n      microphoneIsMuted: true,\n      cameraIsEnabled: false,\n      recordPageIsDisplayed: true,\n      timeCounter: 0,\n      imageIsDisplayed: false,\n      videoIsDisplayed: false,\n      audioIsDisplayed: false,\n      documentIsDisplayed: false,\n      recordPermissionIsGranted: false,\n      title: \"File displayer\",\n      recordedItems: this._recordedItem,\n      currentSelectedItemId: \"\",\n      selectedFiles: this._selectedFiles,\n      currentSrc: \"\"\n    };\n    this.state = this._state;\n\n    this.closeRenderZone = event => {\n      try {\n        this.videoTrack.stop();\n        this.audioTrack.stop();\n        this.player.srcObject = null;\n      } catch (error) {}\n\n      this.setState(this._state);\n      var renderZone = document.getElementById(\"display-media-box\");\n      renderZone === null || renderZone === void 0 ? void 0 : renderZone.style.setProperty(\"display\", \"none\");\n    };\n\n    this.recordPauseVideo = event => {\n      var isRecording = !this.state.isRecording;\n\n      if (isRecording && this._intervalId === -1 && this.state.recordIsStopped) {\n        var _this$mediaRecorder;\n\n        (_this$mediaRecorder = this.mediaRecorder) === null || _this$mediaRecorder === void 0 ? void 0 : _this$mediaRecorder.start();\n      } else if (isRecording === false) {\n        var div = document.getElementById(\"record-icon\");\n        div === null || div === void 0 ? void 0 : div.style.setProperty(\"opacity\", \"1\");\n        this.setState({\n          title: \"Record is in pause\"\n        });\n      } else this.setState({\n        title: \"Recording...\"\n      });\n\n      this.setState({\n        isRecording\n      });\n    };\n\n    this.stopRecordVideo = (event, save = true) => {\n      var _this$mediaRecorder2;\n\n      (_this$mediaRecorder2 = this.mediaRecorder) === null || _this$mediaRecorder2 === void 0 ? void 0 : _this$mediaRecorder2.stop();\n    };\n\n    this.mutedDemuteMicrophone = event => {\n      try {\n        this.audioTrack.enabled = this.state.microphoneIsMuted;\n      } catch (error) {}\n\n      var microphoneIsMuted = !this.state.microphoneIsMuted;\n      this.setState({\n        microphoneIsMuted\n      });\n    };\n\n    this.enableDisableCamera = event => {\n      var cameraIsEnabled = !this.state.cameraIsEnabled;\n\n      try {\n        this.videoTrack.enabled = cameraIsEnabled;\n      } catch (error) {}\n\n      this.setState({\n        cameraIsEnabled\n      });\n    };\n\n    this.dataURLtoFile = (dataurl, filename) => {\n      var arr = dataurl.split(','),\n          mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(arr[1]),\n          n = bstr.length,\n          u8arr = new Uint8Array(n);\n\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n\n      return new File([u8arr], filename, {\n        type: mime\n      }); // var file = dataURLtoFile('data:text/plain;base64,aGVsbG8gd29ybGQ=','hello.txt');\n    };\n\n    this.takePhoto = event => {\n      var canvas = document.getElementById(\"render-zone-canvas\");\n      var imagebase64data = canvas.toDataURL(\"image/png\"); // imagebase64data = imagebase64data.replace('data:image/png;base64,', '');\n\n      var photo = this.dataURLtoFile(imagebase64data, `$IMG-${new Date().toISOString()}.png`);\n      var selectedFiles = [...this.state.selectedFiles];\n      selectedFiles.push(photo);\n      var fileSrc = URL.createObjectURL(photo);\n      this.setState({\n        selectedFiles\n      });\n      this.addItemToRecordedList(photo.name, \"image\", photo.size, fileSrc);\n    };\n\n    this.countTime = () => {\n      if (this.state.isRecording) {\n        var timeCounter = this.state.timeCounter + 1;\n        this.setState({\n          timeCounter\n        });\n        var div = document.getElementById(\"record-icon\");\n\n        if ((div === null || div === void 0 ? void 0 : div.style.opacity) === \"1\") {\n          div === null || div === void 0 ? void 0 : div.style.setProperty(\"transition\", \"opacity ease-out .5s\");\n          div === null || div === void 0 ? void 0 : div.style.setProperty(\"opacity\", \"0\");\n        } else {\n          div === null || div === void 0 ? void 0 : div.style.setProperty(\"transition\", \"opacity ease-in .5s\");\n          div === null || div === void 0 ? void 0 : div.style.setProperty(\"opacity\", \"1\");\n        }\n      }\n    };\n\n    this.onMouseEnter = () => {// var div = document.getElementById(\"render-zone-menu\")\n      // div?.style.setProperty(\"visibility\", \"visible\")\n      // div?.style.setProperty(\"width\", \"30%\")\n      // div?.style.setProperty(\"height\", \"70px\")\n    };\n\n    this.onMouseLeave = () => {// var div = document.getElementById(\"render-zone-menu\")\n      // div?.style.setProperty(\"visibility\", \"hidden\")\n      // div?.style.setProperty(\"width\", `${this.width}`)\n      // div?.style.setProperty(\"height\", `${this.height}`)\n    };\n\n    this.removeItemToRecordedList = fileId => {\n      var item = this.state.recordedItems.find(item => item.fileId === fileId);\n      var recordedItems = [...this.state.recordedItems.filter(item => item.fileId !== fileId)];\n      if ((item === null || item === void 0 ? void 0 : item.fileId) === this.state.currentSelectedItemId) this.setState({\n        recordedItems,\n        recordPageIsDisplayed: true\n      });else this.setState({\n        recordedItems\n      });\n    };\n\n    this.displaySelectedItem = fileId => {\n      var item = this.state.recordedItems.find(item => item.fileId === fileId);\n      var namePart = item === null || item === void 0 ? void 0 : item.fileName.split('/');\n      var title = namePart[(namePart === null || namePart === void 0 ? void 0 : namePart.length) - 1];\n      this.setState({\n        currentSrc: item === null || item === void 0 ? void 0 : item.fileSrc\n      });\n\n      try {\n        this.videoTrack.enabled = false;\n        this.audioTrack.enabled = false;\n      } catch (error) {} //Search type of file to display\n\n\n      if ((item === null || item === void 0 ? void 0 : item.fileType.toLocaleLowerCase()) === \"image\") this.setState({\n        imageIsDisplayed: true,\n        audioIsDisplayed: false,\n        videoIsDisplayed: false,\n        documentIsDisplayed: false\n      });else if ((item === null || item === void 0 ? void 0 : item.fileType.toLocaleLowerCase()) === \"audio\") this.setState({\n        imageIsDisplayed: false,\n        audioIsDisplayed: true,\n        videoIsDisplayed: false,\n        documentIsDisplayed: false\n      });else if ((item === null || item === void 0 ? void 0 : item.fileType.toLocaleLowerCase()) === \"video\") this.setState({\n        imageIsDisplayed: false,\n        audioIsDisplayed: false,\n        videoIsDisplayed: true,\n        documentIsDisplayed: false\n      });else if ((item === null || item === void 0 ? void 0 : item.fileType.toLocaleLowerCase()) === \"document\") this.setState({\n        imageIsDisplayed: false,\n        audioIsDisplayed: false,\n        videoIsDisplayed: false,\n        documentIsDisplayed: true\n      });else this.setState({\n        imageIsDisplayed: false,\n        audioIsDisplayed: false,\n        videoIsDisplayed: false,\n        documentIsDisplayed: false\n      });\n      this.setState({\n        recordPageIsDisplayed: false,\n        currentSelectedItemId: item === null || item === void 0 ? void 0 : item.fileId,\n        title: title === undefined ? \"File displayer\" : title\n      });\n    };\n\n    this.addItemToRecordedList = (fileName, fileType, fileSize, fileSrc = \"\", fileSrcImage = \"\") => {\n      var recordedItems = [];\n      var item = {\n        fileId: \"\" + Math.random() + fileName,\n        fileName: fileName,\n        fileType: fileType,\n        fileSize: fileSize,\n        fileSrc: fileSrc,\n        fileSrcImage: fileSrcImage\n      };\n      recordedItems.push(item);\n      recordedItems.push(...this.state.recordedItems);\n      this.setState({\n        recordedItems\n      });\n    };\n\n    this.onPressDisplayMenuButton = event => {\n      // var item = this.state.recordedItems.find((item)=>item.fileId === fileId)\n      try {\n        this.videoTrack.enabled = this.state.cameraIsEnabled;\n        this.audioTrack.enabled = !this.state.microphoneIsMuted;\n      } catch (error) {}\n\n      this.setState({\n        recordPageIsDisplayed: true,\n        title: \"File displayer\"\n      });\n    };\n\n    this.componentDidMount = () => {\n      var _div$clientWidth, _div$clientHeight;\n\n      var div = document.getElementById(\"render-zone-menu\");\n      this.width = (_div$clientWidth = div === null || div === void 0 ? void 0 : div.clientWidth) !== null && _div$clientWidth !== void 0 ? _div$clientWidth : this.width;\n      this.height = (_div$clientHeight = div === null || div === void 0 ? void 0 : div.clientHeight) !== null && _div$clientHeight !== void 0 ? _div$clientHeight : this.height;\n      this.player.setAttribute(\"autoplay\", \"true\");\n      this.player.setAttribute(\"controls\", \"true\");\n      navigator.mediaDevices.getUserMedia(this.constraints).then(stream => {\n        this.videoTrack = stream.getVideoTracks()[0];\n        this.videoTrack.enabled = this.state.cameraIsEnabled;\n        this.audioTrack = stream.getAudioTracks()[0];\n        this.audioTrack.enabled = !this.state.microphoneIsMuted;\n        this.player.srcObject = stream;\n        const options = {\n          mimeType: 'video/webm'\n        };\n        const recordedChunks = [];\n        var canvas = document.getElementById(\"render-zone-canvas\");\n        this.mediaRecorder = new MediaRecorder(stream, options);\n\n        this.mediaRecorder.ondataavailable = event => {\n          if (event.data.size > 0 && this.state.isRecording) recordedChunks.push(event.data);\n        };\n\n        var fileSrcImage = \"\";\n\n        this.mediaRecorder.onstart = event => {\n          while (recordedChunks.length > 0) recordedChunks.pop();\n\n          fileSrcImage = URL.createObjectURL(this.dataURLtoFile(canvas.toDataURL(\"image/png\"), \"file.png\"));\n          this.setState({\n            recordIsStopped: false,\n            isRecording: true,\n            title: \"Recording...\"\n          });\n          this._intervalId = setInterval(() => this.countTime(), 1000); // this.player.srcObject.getVideoTracks().forEach(track => track.stop())\n        };\n\n        this.mediaRecorder.onstop = event => {\n          const file = new Blob(recordedChunks, {\n            type: \"video/webm\"\n          });\n          const selectedFiles = [...this.state.selectedFiles];\n          selectedFiles.push(file); //Stop counter\n\n          clearInterval(this._intervalId);\n          this._intervalId = -1; //Set opacity of record icon to 1 because it can be 0\n\n          var div = document.getElementById(\"record-icon\");\n          div === null || div === void 0 ? void 0 : div.style.setProperty(\"opacity\", \"1\");\n          if (this.state.recordIsStopped === false) this.addItemToRecordedList(\"aaa.webm\", \"video\", file.size, URL.createObjectURL(file), fileSrcImage);\n          this.setState({\n            selectedFiles,\n            isRecording: false,\n            timeCounter: 0,\n            recordIsStopped: true,\n            title: \"File displayer\"\n          });\n        };\n\n        setInterval(() => {\n          var _this$context, _this$context2;\n\n          (_this$context = this.context) === null || _this$context === void 0 ? void 0 : _this$context.scale(-1, 1);\n          (_this$context2 = this.context) === null || _this$context2 === void 0 ? void 0 : _this$context2.drawImage(this.player, 0, 0, -1 * canvas.width, canvas.height);\n        }, 1000 / 60);\n        this.setState({\n          recordPermissionIsGranted: true\n        });\n      }); // this.addItemToRecordedList(\"ovi&mbouendeu.mp4\", \"video\", 1024*1024+27364)\n    };\n\n    this.componentDidUpdate = () => {\n      var canvas = document.getElementById(\"render-zone-canvas\");\n      this.context = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n    };\n  }\n\n  render() {\n    var capturedItems = this.state.recordedItems.map(item => /*#__PURE__*/_jsxDEV(CapturedItem, {\n      fileName: item.fileName,\n      fileType: item.fileType,\n      fileSize: item.fileSize,\n      fileSrc: item.fileType === \"video\" ? item.fileSrcImage : item.fileSrc,\n      removeItem: () => {\n        var _item$fileId;\n\n        return this.removeItemToRecordedList((_item$fileId = item.fileId) !== null && _item$fileId !== void 0 ? _item$fileId : \"\");\n      },\n      displayMedia: () => {\n        var _item$fileId2;\n\n        return this.displaySelectedItem((_item$fileId2 = item.fileId) !== null && _item$fileId2 !== void 0 ? _item$fileId2 : \"\");\n      }\n    }, new Date().getTime() + Math.random() + \"field\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 68\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"display-media-box\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"render-zone\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"render-zone-title-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: this.state.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 53\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"img\", {\n            src: close,\n            alt: \"close\",\n            onClick: this.closeRenderZone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 85\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"render-zone-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"render-zone-display\",\n            children: [this.state.recordPageIsDisplayed ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"render-record-time\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"record-icon\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"record-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 59\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"record-time\",\n                children: seconds2Time(this.state.timeCounter)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 62\n            }, this) : null, this.state.recordPageIsDisplayed ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n              id: \"render-zone-canvas\",\n              className: \"render-zone-canvas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 61\n            }, this) : null, !this.state.recordPageIsDisplayed ? this.state.imageIsDisplayed ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: this.state.currentSrc,\n              className: \"render-zone-canvas\",\n              alt: \"display\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 30\n            }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n              className: \"render-zone-canvas\",\n              controls: true,\n              children: /*#__PURE__*/_jsxDEV(\"source\", {\n                src: this.state.currentSrc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 30\n            }, this) : null, this.state.recordPageIsDisplayed ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"render-zone-menu\",\n              id: \"render-zone-menu\",\n              onMouseEnter: this.onMouseEnter,\n              onMouseLeave: this.onMouseLeave,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: this.state.microphoneIsMuted ? mutedMicrophone : microphone,\n                alt: \"\",\n                onClick: this.mutedDemuteMicrophone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: this.state.cameraIsEnabled ? video : videoDeactivate,\n                alt: \"\",\n                onClick: this.enableDisableCamera\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: this.state.recordIsStopped ? record : this.state.isRecording ? pauseCircular : play,\n                onClick: this.recordPauseVideo,\n                alt: \"start-pause\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: stopCircular,\n                onClick: this.stopRecordVideo,\n                alt: \"stop\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: camera,\n                onClick: this.takePhoto,\n                alt: \"take pic\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 26\n            }, this) : null, !this.state.recordPageIsDisplayed ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"display-menu-button\",\n              onClick: this.onPressDisplayMenuButton,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 63\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-manager-sender\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-manager\",\n              id: \"file-manager\",\n              children: capturedItems\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-send-zone\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"Select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.closeRenderZone,\n                children: \"Quit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default RenderFileZone;","map":{"version":3,"sources":["C:/Users/ketis/Documents/estenligne/ReactSPA/src/components/shared/renderfile/RenderFileZone.tsx"],"names":["Component","CapturedItem","close","camera","pauseCircular","play","stopCircular","record","microphone","mutedMicrophone","video","videoDeactivate","seconds2Time","RenderFileZone","props","player","document","createElement","mediaRecorder","_intervalId","_recordedItem","width","height","recordPermissionIsAccepted","constraints","audio","videoTrack","audioTrack","context","_selectedFiles","_state","isRecording","recordIsStopped","microphoneIsMuted","cameraIsEnabled","recordPageIsDisplayed","timeCounter","imageIsDisplayed","videoIsDisplayed","audioIsDisplayed","documentIsDisplayed","recordPermissionIsGranted","title","recordedItems","currentSelectedItemId","selectedFiles","currentSrc","state","closeRenderZone","event","stop","srcObject","error","setState","renderZone","getElementById","style","setProperty","recordPauseVideo","start","div","stopRecordVideo","save","mutedDemuteMicrophone","enabled","enableDisableCamera","dataURLtoFile","dataurl","filename","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","type","takePhoto","canvas","imagebase64data","toDataURL","photo","Date","toISOString","push","fileSrc","URL","createObjectURL","addItemToRecordedList","name","size","countTime","opacity","onMouseEnter","onMouseLeave","removeItemToRecordedList","fileId","item","find","filter","displaySelectedItem","namePart","fileName","fileType","toLocaleLowerCase","undefined","fileSize","fileSrcImage","Math","random","onPressDisplayMenuButton","componentDidMount","clientWidth","clientHeight","setAttribute","navigator","mediaDevices","getUserMedia","then","stream","getVideoTracks","getAudioTracks","options","mimeType","recordedChunks","MediaRecorder","ondataavailable","data","onstart","pop","setInterval","onstop","file","Blob","clearInterval","scale","drawImage","componentDidUpdate","getContext","render","capturedItems","map","getTime"],"mappings":"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","sourcesContent":["import { Component } from 'react'\r\n\r\nimport CapturedItem from '../captureditem/CapturedItem';\r\n\r\nimport close from \"./../../../wwwroot/images/times_white.png\";\r\nimport camera from \"./../../../wwwroot/images/camera_p.png\";\r\nimport pauseCircular from \"./../../../wwwroot/images/pause_circular.png\";\r\nimport play from \"./../../../wwwroot/images/play.png\";\r\nimport stopCircular from \"./../../../wwwroot/images/stop_circular.png\";\r\nimport record from \"./../../../wwwroot/images/record_circular.png\";\r\nimport microphone from \"./../../../wwwroot/images/microphone.png\";\r\nimport mutedMicrophone from \"./../../../wwwroot/images/muted_microphone.png\"\r\nimport video from \"./../../../wwwroot/images/video_white.png\"\r\nimport videoDeactivate from \"./../../../wwwroot/images/video_deactivate.png\"\r\n\r\nimport { seconds2Time } from '../utils/functions';\r\n\r\nimport \"./RenderFileZone.css\"\r\n\r\nclass RenderFileZone extends Component {\r\n    props:any = this.props \r\n    player:HTMLVideoElement = document.createElement(\"video\") as HTMLVideoElement\r\n    mediaRecorder:MediaRecorder|null = null\r\n    _intervalId:any = -1\r\n    _recordedItem:Item[] = [] \r\n    width = 0\r\n    height = 0\r\n    recordPermissionIsAccepted = false\r\n    constraints = {\r\n      video: true,\r\n      audio: true\r\n    }\r\n    videoTrack:any \r\n    audioTrack:any\r\n    context:CanvasRenderingContext2D|null = null\r\n    _selectedFiles:Blob[]|File[] = [] \r\n    _state = {\r\n      isRecording: false,\r\n      recordIsStopped: true,\r\n      microphoneIsMuted: true,\r\n      cameraIsEnabled: false,\r\n      recordPageIsDisplayed: true,\r\n      timeCounter: 0,\r\n      imageIsDisplayed: false,\r\n      videoIsDisplayed: false,\r\n      audioIsDisplayed: false,\r\n      documentIsDisplayed: false,\r\n      recordPermissionIsGranted: false,\r\n      title: \"File displayer\",\r\n      recordedItems: this._recordedItem,\r\n      currentSelectedItemId: \"\",\r\n      selectedFiles: this._selectedFiles,\r\n      currentSrc: \"\"\r\n    }\r\n\r\n    state = this._state\r\n\r\n    closeRenderZone = (event:any) => {\r\n        try {\r\n          \r\n          this.videoTrack.stop()\r\n          this.audioTrack.stop()\r\n          this.player.srcObject = null\r\n \r\n        } catch (error) {\r\n          \r\n        }\r\n        this.setState(this._state)\r\n\r\n        var renderZone = document.getElementById(\"display-media-box\")\r\n        renderZone?.style.setProperty(\"display\", \"none\")\r\n    }\r\n\r\n    recordPauseVideo = (event:any) =>\r\n    {\r\n      var isRecording = !this.state.isRecording\r\n      if(isRecording && this._intervalId === -1 && this.state.recordIsStopped)\r\n      {\r\n        this.mediaRecorder?.start()\r\n      }\r\n      else if(isRecording === false )\r\n      {\r\n        var div = document.getElementById(\"record-icon\")\r\n        div?.style.setProperty(\"opacity\", \"1\")\r\n        this.setState({title: \"Record is in pause\"})\r\n      }\r\n      else\r\n        this.setState({title: \"Recording...\"})\r\n      this.setState({isRecording})\r\n    }\r\n\r\n    stopRecordVideo = (event: any, save=true) => {\r\n      this.mediaRecorder?.stop()\r\n      \r\n    }\r\n\r\n    mutedDemuteMicrophone = (event:any) =>\r\n    {\r\n      try {\r\n        this.audioTrack.enabled = this.state.microphoneIsMuted\r\n      } catch (error) {\r\n        \r\n      }\r\n      var microphoneIsMuted = !this.state.microphoneIsMuted\r\n      this.setState({microphoneIsMuted})\r\n    }\r\n\r\n    enableDisableCamera = (event:any) =>\r\n    {\r\n      var cameraIsEnabled = !this.state.cameraIsEnabled\r\n      try {\r\n        this.videoTrack.enabled = cameraIsEnabled        \r\n      } catch (error) {\r\n      }\r\n      \r\n      this.setState({cameraIsEnabled})\r\n    }\r\n\r\n    dataURLtoFile= (dataurl:string, filename:string) => {\r\n \r\n      var arr:any = dataurl.split(','),\r\n          mime = arr[0].match(/:(.*?);/)[1],\r\n          bstr = atob(arr[1]), \r\n          n = bstr.length, \r\n          u8arr = new Uint8Array(n);\r\n          \r\n      while(n--){\r\n          u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      \r\n      return new File([u8arr], filename, {type:mime});\r\n      // var file = dataURLtoFile('data:text/plain;base64,aGVsbG8gd29ybGQ=','hello.txt');\r\n  }\r\n\r\n    takePhoto = (event:any) => \r\n    {\r\n      var canvas = document.getElementById(\"render-zone-canvas\") as HTMLCanvasElement\r\n      var imagebase64data = canvas.toDataURL(\"image/png\");  \r\n      // imagebase64data = imagebase64data.replace('data:image/png;base64,', '');\r\n      var photo = this.dataURLtoFile(imagebase64data, `$IMG-${new Date().toISOString()}.png`) \r\n      \r\n      var selectedFiles = [...this.state.selectedFiles]\r\n      selectedFiles.push(photo)\r\n      var fileSrc = URL.createObjectURL(photo)\r\n      this.setState({selectedFiles})\r\n      this.addItemToRecordedList(photo.name, \"image\", photo.size, fileSrc)\r\n    }\r\n\r\n    countTime = () =>\r\n    {\r\n      if(this.state.isRecording)\r\n      {      \r\n        var timeCounter = this.state.timeCounter + 1\r\n        this.setState({timeCounter})\r\n\r\n        var div = document.getElementById(\"record-icon\")\r\n        if(div?.style.opacity === \"1\")\r\n        {\r\n          div?.style.setProperty(\"transition\", \"opacity ease-out .5s\")\r\n          div?.style.setProperty(\"opacity\", \"0\")\r\n        }\r\n        else\r\n        {\r\n          div?.style.setProperty(\"transition\", \"opacity ease-in .5s\")\r\n          div?.style.setProperty(\"opacity\", \"1\")\r\n        }\r\n        \r\n      }\r\n    }\r\n\r\n    onMouseEnter = () =>\r\n    {\r\n      // var div = document.getElementById(\"render-zone-menu\")\r\n      // div?.style.setProperty(\"visibility\", \"visible\")\r\n      // div?.style.setProperty(\"width\", \"30%\")\r\n      // div?.style.setProperty(\"height\", \"70px\")\r\n    }\r\n\r\n    onMouseLeave = () =>\r\n    {\r\n      // var div = document.getElementById(\"render-zone-menu\")\r\n      // div?.style.setProperty(\"visibility\", \"hidden\")\r\n      \r\n      // div?.style.setProperty(\"width\", `${this.width}`)\r\n      // div?.style.setProperty(\"height\", `${this.height}`)\r\n    }\r\n\r\n    removeItemToRecordedList = (fileId:string) => \r\n    {\r\n      var item = this.state.recordedItems.find((item)=>item.fileId === fileId)\r\n      var recordedItems = [...this.state.recordedItems.filter((item)=> item.fileId !== fileId)]\r\n      \r\n      if(item?.fileId === this.state.currentSelectedItemId)\r\n        this.setState({recordedItems, recordPageIsDisplayed: true})  \r\n      else\r\n        this.setState({recordedItems})\r\n    } \r\n\r\n    displaySelectedItem = (fileId:string) =>\r\n    {\r\n      var item = this.state.recordedItems.find((item)=>item.fileId === fileId)\r\n      var namePart:any = item?.fileName.split('/')\r\n      var title:any = namePart[namePart?.length - 1]\r\n      \r\n      this.setState({currentSrc: item?.fileSrc})\r\n      try {\r\n        this.videoTrack.enabled = false\r\n        this.audioTrack.enabled = false \r\n      } catch (error) {\r\n        \r\n      }\r\n      //Search type of file to display\r\n      if(item?.fileType.toLocaleLowerCase() === \"image\")\r\n        this.setState({\r\n          imageIsDisplayed:true, \r\n          audioIsDisplayed: false, \r\n          videoIsDisplayed:false, \r\n          documentIsDisplayed:false\r\n        })\r\n      else if(item?.fileType.toLocaleLowerCase() === \"audio\")\r\n        this.setState({\r\n          imageIsDisplayed:false, \r\n          audioIsDisplayed: true, \r\n          videoIsDisplayed:false, \r\n          documentIsDisplayed:false\r\n        })\r\n      else if(item?.fileType.toLocaleLowerCase() === \"video\")\r\n        this.setState({\r\n          imageIsDisplayed:false, \r\n          audioIsDisplayed: false, \r\n          videoIsDisplayed:true, \r\n          documentIsDisplayed:false\r\n        })\r\n      else if(item?.fileType.toLocaleLowerCase() === \"document\")\r\n        this.setState({\r\n          imageIsDisplayed:false, \r\n          audioIsDisplayed: false, \r\n          videoIsDisplayed:false, \r\n          documentIsDisplayed:true\r\n        })\r\n      else\r\n        this.setState({\r\n          imageIsDisplayed:false, \r\n          audioIsDisplayed: false, \r\n          videoIsDisplayed:false, \r\n          documentIsDisplayed:false\r\n        })\r\n\r\n      this.setState({recordPageIsDisplayed:false, currentSelectedItemId:item?.fileId, title:(title===undefined)?\"File displayer\":title})\r\n    }\r\n\r\n    addItemToRecordedList = (fileName:string, fileType:string, fileSize:number, fileSrc:string=\"\", fileSrcImage:string=\"\") => \r\n    {\r\n        var recordedItems:Item[] = []\r\n        var item:Item = {\r\n          fileId: \"\"+Math.random()+fileName,\r\n          fileName: fileName,\r\n          fileType: fileType,\r\n          fileSize: fileSize,\r\n          fileSrc: fileSrc,\r\n          fileSrcImage: fileSrcImage\r\n        } \r\n\r\n        recordedItems.push(item)\r\n        recordedItems.push(...this.state.recordedItems)\r\n        this.setState({recordedItems})\r\n    }\r\n\r\n    onPressDisplayMenuButton = (event:any) =>\r\n    {\r\n      // var item = this.state.recordedItems.find((item)=>item.fileId === fileId)\r\n      try {\r\n        this.videoTrack.enabled = this.state.cameraIsEnabled\r\n        this.audioTrack.enabled = !this.state.microphoneIsMuted        \r\n      } catch (error) {\r\n        \r\n      }\r\n  \r\n      this.setState({recordPageIsDisplayed:true, title:\"File displayer\"})\r\n    }\r\n\r\n    componentDidMount = () =>\r\n    {\r\n      var div = document.getElementById(\"render-zone-menu\")\r\n      this.width = div?.clientWidth??this.width\r\n      this.height = div?.clientHeight??this.height\r\n\r\n      \r\n      this.player.setAttribute(\"autoplay\", \"true\")\r\n      this.player.setAttribute(\"controls\", \"true\")\r\n\r\n      navigator.mediaDevices.getUserMedia(this.constraints)\r\n      .then((stream) => {\r\n        this.videoTrack = stream.getVideoTracks()[0]\r\n        this.videoTrack.enabled = this.state.cameraIsEnabled\r\n        \r\n        this.audioTrack = stream.getAudioTracks()[0]\r\n        this.audioTrack.enabled = !this.state.microphoneIsMuted\r\n        \r\n        this.player.srcObject = stream\r\n        \r\n        const options = {mimeType: 'video/webm'};\r\n        const recordedChunks:any[] = []\r\n        \r\n        var canvas = document.getElementById(\"render-zone-canvas\") as HTMLCanvasElement\r\n\r\n        this.mediaRecorder = new MediaRecorder(stream, options)\r\n        \r\n        this.mediaRecorder.ondataavailable = (event) =>{\r\n            if(event.data.size>0 && this.state.isRecording)\r\n              recordedChunks.push(event.data)\r\n        }\r\n        var fileSrcImage=\"\";\r\n        this.mediaRecorder.onstart = (event) =>{\r\n          \r\n            while(recordedChunks.length > 0) recordedChunks.pop()\r\n\r\n            fileSrcImage = URL.createObjectURL(this.dataURLtoFile(canvas.toDataURL(\"image/png\"), \"file.png\"))\r\n            this.setState({recordIsStopped: false, isRecording:true, title: \"Recording...\"})\r\n            this._intervalId = setInterval(()=> this.countTime(), 1000)\r\n            // this.player.srcObject.getVideoTracks().forEach(track => track.stop())\r\n        }\r\n        \r\n        this.mediaRecorder.onstop = (event) =>{\r\n          const file = new Blob(recordedChunks, {type: \"video/webm\"})\r\n          const selectedFiles = [...this.state.selectedFiles]\r\n          selectedFiles.push(file)\r\n\r\n          //Stop counter\r\n          clearInterval(this._intervalId)\r\n          this._intervalId = -1\r\n\r\n          //Set opacity of record icon to 1 because it can be 0\r\n          var div = document.getElementById(\"record-icon\")\r\n          div?.style.setProperty(\"opacity\", \"1\")\r\n          \r\n          if(this.state.recordIsStopped === false)\r\n            this.addItemToRecordedList(\"aaa.webm\", \"video\", file.size, URL.createObjectURL(file), fileSrcImage)\r\n\r\n          this.setState({selectedFiles, isRecording:false, timeCounter:0, recordIsStopped:true, title:\"File displayer\"})\r\n        }\r\n\r\n        setInterval(()=>{\r\n                        this.context?.scale(-1, 1); \r\n                        this.context?.drawImage(this.player, 0, 0, -1*canvas.width, canvas.height);\r\n                      }, 1000/60)\r\n\r\n        this.setState({recordPermissionIsGranted:true})\r\n      });\r\n\r\n\r\n      // this.addItemToRecordedList(\"ovi&mbouendeu.mp4\", \"video\", 1024*1024+27364)\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n          var canvas = document.getElementById(\"render-zone-canvas\") as HTMLCanvasElement\r\n          this.context = canvas?.getContext('2d');\r\n    }\r\n\r\n    render() {\r\n        var capturedItems = this.state.recordedItems.map((item) => <CapturedItem \r\n        fileName = {item.fileName} \r\n        fileType = {item.fileType}\r\n        fileSize = {item.fileSize}\r\n        fileSrc = {(item.fileType===\"video\")?item.fileSrcImage:item.fileSrc} \r\n        removeItem = {() => this.removeItemToRecordedList(item.fileId??\"\")}\r\n        key = {(new Date()).getTime() + Math.random() + \"field\"}\r\n        displayMedia = {\r\n            () => this.displaySelectedItem(item.fileId??\"\")\r\n        }/>)\r\n        \r\n        return (\r\n            <div id = \"display-media-box\">\r\n                <div id = \"render-zone\">\r\n                  <div id = \"render-zone-title-bar\"><span>{this.state.title}</span> <img src={close} alt=\"close\" onClick={this.closeRenderZone} /></div>\r\n                  <div className=\"render-zone-body\">\r\n                    <div className=\"render-zone-display\">\r\n                        {(this.state.recordPageIsDisplayed)?(<div className=\"render-record-time\">\r\n                            <div className=\"record-icon\"> <div id=\"record-icon\"></div> </div>\r\n                            <span className=\"record-time\">{seconds2Time(this.state.timeCounter)}</span>\r\n                        </div>):null}\r\n                        \r\n                        {(this.state.recordPageIsDisplayed)?<canvas id=\"render-zone-canvas\" className=\"render-zone-canvas\" >\r\n                        </canvas>:null}\r\n                        {((!this.state.recordPageIsDisplayed)?((this.state.imageIsDisplayed)?\r\n                            (<img src={this.state.currentSrc} className=\"render-zone-canvas\" alt=\"display\" />):\r\n                            (<video className=\"render-zone-canvas\" controls>\r\n                                <source src={this.state.currentSrc} />\r\n                            </video>)):null)} \r\n                        {(this.state.recordPageIsDisplayed)?\r\n                        (<div className=\"render-zone-menu\" id=\"render-zone-menu\" onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\r\n                            <img src={(this.state.microphoneIsMuted)?mutedMicrophone:microphone} alt=\"\" onClick = {this.mutedDemuteMicrophone} />\r\n                            <img src={(this.state.cameraIsEnabled)?video:videoDeactivate} alt=\"\" onClick = {this.enableDisableCamera} />\r\n                            \r\n                            <img src={(this.state.recordIsStopped)?(record):((this.state.isRecording)?pauseCircular:play)} onClick = {this.recordPauseVideo} alt=\"start-pause\" />\r\n                            <img  src={stopCircular} onClick = {this.stopRecordVideo} alt=\"stop\" />\r\n                            <img src={camera} onClick = {this.takePhoto} alt=\"take pic\" />\r\n                        </div>):null}\r\n\r\n                        {(!this.state.recordPageIsDisplayed)?(<div className=\"display-menu-button\" onClick={this.onPressDisplayMenuButton} >\r\n                            <span>{\"<\"}</span>\r\n                            <span>Back</span>\r\n                        </div>):null}\r\n                    </div>\r\n                    <div className=\"file-manager-sender\">\r\n                      <div className=\"file-manager\" id=\"file-manager\">\r\n                          {capturedItems}\r\n                      </div>\r\n                      <div className=\"file-send-zone\">\r\n                        <button>Select</button>\r\n                        <button onClick={this.closeRenderZone}>Quit</button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                  </div>\r\n                </div>\r\n              </div>\r\n        )\r\n    }\r\n}\r\n\r\ninterface Item\r\n{\r\n  fileId?:string\r\n  fileName: string,\r\n  fileType: string,\r\n  fileSrc?: string, \r\n  fileSrcImage?: string\r\n  fileSize: number\r\n}\r\n\r\nexport default RenderFileZone"]},"metadata":{},"sourceType":"module"}