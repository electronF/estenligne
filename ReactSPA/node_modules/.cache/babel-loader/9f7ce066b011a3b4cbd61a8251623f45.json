{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ketis\\\\Documents\\\\estenligne\\\\ReactSPA\\\\src\\\\components\\\\Pages\\\\UserProfilePage\\\\UserProfilePage.tsx\";\nimport { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport PageName from \"../../shared/pagename/PageName\";\nimport UserProfileForm from \"./UserProfileForm/UserProfileForm\";\nimport { postOrUpdateRequest } from \"../../shared/utils/functions\";\nimport Cookies from \"universal-cookie/es6\";\nimport settings from './../../../settings.json';\nimport \"./UserProfilePage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UserProfilePage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.cookies = new Cookies();\n    this.settings = settings;\n    this.props = this.props;\n    this._alertMessage = \"\";\n    this._alertType = \"error\";\n    this.state = {\n      userName: \"\",\n      profileIsSetted: false,\n      alertMessage: this._alertMessage,\n      alertType: this._alertType\n    };\n\n    this.successFunction = result => {\n      console.log(result);\n      var keys = Object.keys(result);\n      console.log(keys, keys.includes(\"userProfileId\"));\n\n      if (keys.includes(\"userProfileId\")) {\n        console.log(\"profile\");\n        let date = new Date();\n        let expirationDate = new Date();\n        expirationDate.setMinutes(date.getMinutes() + 7 * 24 * 60);\n        this.cookies.set(\"userProfileId\", result.userProfileId, {\n          sameSite: true,\n          expires: expirationDate\n        });\n        this.setState({\n          profileIsSetted: true,\n          alertMessage: ''\n        });\n      } else this.setState({\n        profileIsSetted: false,\n        alertMessage: result\n      });\n    };\n\n    this.errorFunction = error => {\n      this.setState({\n        profileIsSetted: false,\n        alertMessage: `Something append wrong ${error}`\n      });\n    };\n\n    this.uploadImage = data => {\n      return true;\n    };\n\n    this.submitForm = data => {\n      var _data$about;\n\n      var newData = {\n        about: (_data$about = data.about) !== null && _data$about !== void 0 ? _data$about : \"\",\n        username: data.name,\n        identity: this.cookies.get(\"identity\")\n      };\n      postOrUpdateRequest(`${this.settings.host}/api/userprofile`, \"POST\", newData, this.cookies.get(\"token\"), this.successFunction, this.errorFunction);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: /*#__PURE__*/_jsxDEV(PageName, {\n          name: \"Profile Page\"\n        }, \"profilepage-name\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(UserProfileForm, {\n          uploadImage: this.uploadImage,\n          alertType: this.state.alertType,\n          alertMessage: this.state.alertMessage,\n          submitForm: this.submitForm\n        }, \"profilepage-form\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), this.state.profileIsSetted ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 47\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default UserProfilePage;","map":{"version":3,"sources":["C:/Users/ketis/Documents/estenligne/ReactSPA/src/components/Pages/UserProfilePage/UserProfilePage.tsx"],"names":["Component","Redirect","PageName","UserProfileForm","postOrUpdateRequest","Cookies","settings","UserProfilePage","cookies","props","_alertMessage","_alertType","state","userName","profileIsSetted","alertMessage","alertType","successFunction","result","console","log","keys","Object","includes","date","Date","expirationDate","setMinutes","getMinutes","set","userProfileId","sameSite","expires","setState","errorFunction","error","uploadImage","data","submitForm","newData","about","username","name","identity","get","host","render"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\r\n\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport PageName from \"../../shared/pagename/PageName\";\r\n\r\nimport UserProfileForm from \"./UserProfileForm/UserProfileForm\";\r\nimport {UserProfile} from \"../../shared/utils/Types\";\r\nimport {postOrUpdateRequest} from \"../../shared/utils/functions\";\r\nimport Cookies from \"universal-cookie/es6\";\r\nimport settings from './../../../settings.json';\r\n\r\nimport \"./UserProfilePage.css\";\r\n\r\n\r\nclass UserProfilePage extends Component{\r\n    \r\n    cookies = new Cookies()\r\n    settings = settings\r\n    props:any = this.props\r\n    _alertMessage = \"\"\r\n    _alertType = \"error\"\r\n    \r\n    state = {\r\n        userName:\"\",\r\n        profileIsSetted: false,\r\n        alertMessage: this._alertMessage,\r\n        alertType: this._alertType\r\n    }\r\n\r\n    successFunction = (result:any) =>\r\n    {\r\n        console.log(result)\r\n        var keys = Object.keys(result)\r\n        console.log(keys, keys.includes(\"userProfileId\"))\r\n        if(keys.includes(\"userProfileId\"))\r\n        {\r\n            console.log(\"profile\")\r\n            let date = new Date()\r\n            let expirationDate = new Date()\r\n            expirationDate.setMinutes(date.getMinutes() + 7 * 24 * 60)\r\n\r\n            this.cookies.set(\"userProfileId\", result.userProfileId, {sameSite: true, expires:expirationDate })                        \r\n            this.setState({profileIsSetted: true, alertMessage:''})\r\n        }\r\n        else\r\n            this.setState({profileIsSetted: false, alertMessage:result})\r\n    }\r\n\r\n    errorFunction = (error:any) =>\r\n    {\r\n        this.setState({profileIsSetted: false,  alertMessage: `Something append wrong ${error}`})\r\n    }\r\n\r\n    uploadImage = (data:File|null) =>\r\n    {\r\n        return true;\r\n    }\r\n\r\n    submitForm = (data:UserProfile) => {\r\n        var newData = {about: data.about??\"\", username:data.name, identity:this.cookies.get(\"identity\")} \r\n        postOrUpdateRequest(`${this.settings.host}/api/userprofile`, \"POST\", newData, this.cookies.get(\"token\"), this.successFunction, this.errorFunction)\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className = \"profile-page\" >\r\n                <div className = \"title\">\r\n                    <PageName name = \"Profile Page\" key = \"profilepage-name\"/>    \r\n                </div>\r\n                \r\n                <div className = \"content\">\r\n                    <UserProfileForm uploadImage={this.uploadImage} alertType={this.state.alertType} alertMessage = {this.state.alertMessage} submitForm = {this.submitForm} key = \"profilepage-form\" />\r\n                </div>\r\n                {(this.state.profileIsSetted)?<Redirect to=\"/home\" />:null}\r\n            </div>\r\n        )    \r\n    }\r\n}\r\n\r\nexport default UserProfilePage"]},"metadata":{},"sourceType":"module"}